{"version":3,"sources":["../src/index.js"],"names":["MarkdownNavbar","props","decodeURIComponent","window","location","hash","replace","scrollEventLock","scrollTop","pageYOffset","document","documentElement","body","newHeadingList","getHeadingList","map","h","distanceToTop","Math","abs","headingTopOffset","offsetTop","distanceList","minDistance","min","curHeading","find","updateHashAuto","dataId","getCurrentHashValue","onHashChange","updateHash","setState","currentListNo","listNo","scrollToTarget","state","addTargetTimeout","clearTimeout","setTimeout","initHeadingsId","addEventListener","winScroll","winHashChange","nextProps","source","scrollEventLockTimer","scrollTo","headings","querySelectorAll","Array","prototype","slice","apply","forEach","dataset","id","scrollTimeout","removeEventListener","contentWithoutCode","trim","pattOfTitle","matchResult","match","navData","r","i","index","level","length","text","levelCount","filter","startLevel","startLevelCount","t","toString","w","$1","$2","parseInt","result","nav","indexOf","target","querySelector","headingId","declarative","getNavStructure","innerText","headingList","x","push","value","updateHashTimeout","history","replaceState","pathname","search","tBlocks","cls","evt","currentHash","onNavItemClick","random","substring","ordered","className","Component","PropTypes","string","isRequired","bool","number","func"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nexport class MarkdownNavbar extends Component {\n  static propTypes = {\n    source: PropTypes.string.isRequired,\n    ordered: PropTypes.bool,\n    headingTopOffset: PropTypes.number,\n    updateHashAuto: PropTypes.bool,\n    declarative: PropTypes.bool,\n    className: PropTypes.string,\n    onNavItemClick: PropTypes.func,\n    onHashChange: PropTypes.func,\n  };\n\n  static defaultProps = {\n    source: '',\n    ordered: true,\n    headingTopOffset: 0,\n    updateHashAuto: true,\n    declarative: false,\n    className: '',\n    onNavItemClick: () => {},\n    onHashChange: () => {},\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentListNo: '',\n    };\n  }\n\n  componentDidMount() {\n    if (this.addTargetTimeout) {\n      clearTimeout(this.addTargetTimeout);\n    }\n    this.addTargetTimeout = setTimeout(() => {\n      this.initHeadingsId();\n      document.addEventListener('scroll', this.winScroll, false);\n      window.addEventListener('hashchange', this.winHashChange, false);\n    }, 500);\n  }\n\n  shouldComponentUpdate(nextProps) {\n    if (nextProps.source !== this.props.source) {\n      if (this.scrollEventLockTimer) {\n        clearTimeout(this.scrollEventLockTimer);\n      }\n      this.scrollEventLock = true;\n\n      window.scrollTo(0, 0);\n      this.setState({\n        currentListNo: '',\n      });\n      const headings = document.querySelectorAll('h1, h2, h3, h4, h5, h6');\n      Array.prototype.slice.apply(headings).forEach((h) => (h.dataset.id = ''));\n\n      this.scrollEventLockTimer = setTimeout(() => {\n        this.initHeadingsId();\n        this.scrollEventLock = false;\n      }, 500);\n    }\n    return true;\n  }\n\n  componentWillUnmount() {\n    if (this.addTargetTimeout) {\n      clearTimeout(this.addTargetTimeout);\n    }\n    if (this.scrollTimeout) {\n      clearTimeout(this.scrollTimeout);\n    }\n    document.removeEventListener('scroll', this.winScroll, false);\n    window.removeEventListener('hashchange', this.winHashChange, false);\n  }\n\n  getNavStructure() {\n    const contentWithoutCode = this.props.source\n      .replace(/^[^#]+\\n/g, '')\n      .replace(/(?:[^\\n#]+)#+\\s([^#\\n]+)\\n*/g, '') // 匹配行内出现 # 号的情况\n      .replace(/^#\\s[^#\\n]*\\n+/, '')\n      .replace(/```[^`\\n]*\\n+[^```]+```\\n+/g, '')\n      .replace(/`([^`\\n]+)`/g, '$1')\n      .replace(/\\*\\*?([^*\\n]+)\\*\\*?/g, '$1')\n      .replace(/__?([^_\\n]+)__?/g, '$1')\n      .trim();\n\n    const pattOfTitle = /#+\\s([^#\\n]+)\\n*/g;\n    const matchResult = contentWithoutCode.match(pattOfTitle);\n\n    if (!matchResult) {\n      return [];\n    }\n\n    const navData = matchResult.map((r, i) => ({\n      index: i,\n      level: r.match(/^#+/g)[0].length,\n      text: r.replace(pattOfTitle, '$1'),\n    }));\n\n    const levelCount = (level) =>\n      navData.filter((r) => r.level === level).length;\n    let startLevel = 1;\n    let startLevelCount = levelCount(startLevel);\n    while (!startLevelCount) {\n      startLevel += 1;\n      startLevelCount = levelCount(startLevel);\n    }\n\n    let listNo = 1;\n    navData.forEach((t) => {\n      if (t.level === startLevel) {\n        t.listNo = listNo.toString();\n        listNo += 1;\n      }\n    });\n\n    navData.forEach((t, i) => {\n      if (!t.listNo) {\n        if (navData[i - 1] && t.level === navData[i - 1].level + 1) {\n          t.listNo = `${navData[i - 1].listNo}.1`;\n        } else if (navData[i - 1] && t.level === navData[i - 1].level) {\n          t.listNo = navData[i - 1].listNo.replace(\n            /^(.+\\.)(\\d+)$/g,\n            (w, $1, $2) => `${$1}${parseInt($2, 10) + 1}`\n          );\n        } else {\n          t.listNo = '';\n        }\n      }\n    });\n\n    const result = navData.map((nav) => ({\n      ...nav,\n      listNo: nav.listNo.indexOf('.') < 0 ? `${nav.listNo}.` : nav.listNo,\n      text: nav.text,\n    }));\n\n    return result;\n  }\n\n  scrollToTarget(dataId) {\n    if (this.scrollTimeout) {\n      clearTimeout(this.scrollTimeout);\n    }\n\n    this.scrollTimeout = setTimeout(() => {\n      const target = document.querySelector(`[data-id=\"${dataId}\"]`);\n      if (target && typeof target.offsetTop === 'number') {\n        window.scrollTo(0, target.offsetTop - this.props.headingTopOffset);\n      }\n    }, 0);\n  }\n\n  initHeadingsId() {\n    const headingId = decodeURIComponent(\n      this.props.declarative\n        ? window.location.hash.replace(/^#/, '').trim()\n        : (window.location.hash.match(/heading-\\d+/g) || [])[0]\n    );\n\n    this.getNavStructure().forEach((t) => {\n      const headings = document.querySelectorAll(`h${t.level}`);\n      const curHeading = Array.prototype.slice\n        .apply(headings)\n        .find(\n          (h) =>\n            h.innerText.trim() === t.text.trim() &&\n            (!h.dataset || !h.dataset.id)\n        );\n\n      if (curHeading) {\n        curHeading.dataset.id = this.props.declarative\n          ? t.text\n          : `heading-${t.index}`;\n\n        if (headingId && headingId === curHeading.dataset.id) {\n          this.scrollToTarget(headingId);\n          this.setState({\n            currentListNo: t.listNo,\n          });\n        }\n      }\n    });\n  }\n\n  getHeadingList() {\n    const headingList = [];\n\n    this.getNavStructure().forEach((t) => {\n      const headings = document.querySelectorAll(`h${t.level}`);\n      const curHeading = Array.prototype.slice\n        .apply(headings)\n        .find(\n          (h) =>\n            h.innerText.trim() === t.text.trim() &&\n            !headingList.find((x) => x.offsetTop === h.offsetTop)\n        );\n      if (curHeading) {\n        headingList.push({\n          dataId: this.props.declarative ? t.text : `heading-${t.index}`,\n          listNo: t.listNo,\n          offsetTop: curHeading.offsetTop,\n        });\n      }\n    });\n\n    return headingList;\n  }\n\n  getCurrentHashValue = () =>\n    decodeURIComponent(window.location.hash.replace(/^#/, ''));\n\n  winScroll = () => {\n    if (this.scrollEventLock) return;\n\n    const scrollTop =\n      window.pageYOffset ||\n      document.documentElement.scrollTop ||\n      document.body.scrollTop ||\n      0;\n\n    const newHeadingList = this.getHeadingList().map((h) => ({\n      ...h,\n      distanceToTop: Math.abs(\n        scrollTop + this.props.headingTopOffset - h.offsetTop\n      ),\n    }));\n    const distanceList = newHeadingList.map((h) => h.distanceToTop);\n    const minDistance = Math.min(...distanceList);\n    const curHeading = newHeadingList.find(\n      (h) => h.distanceToTop === minDistance\n    );\n\n    if (!curHeading) return;\n\n    if (this.props.updateHashAuto) {\n      // Hash changing callback\n      if (curHeading.dataId !== this.getCurrentHashValue()) {\n        this.props.onHashChange(curHeading.dataId, this.getCurrentHashValue());\n      }\n\n      this.updateHash(curHeading.dataId);\n    }\n    this.setState({\n      currentListNo: curHeading.listNo,\n    });\n  };\n\n  winHashChange = () => {\n    this.scrollToTarget(this.getCurrentHashValue());\n  };\n\n  updateHash(value) {\n    if (this.updateHashTimeout) {\n      clearTimeout(this.updateHashTimeout);\n    }\n\n    this.updateHashTimeout = setTimeout(() => {\n      window.history.replaceState(\n        {},\n        '',\n        `${window.location.pathname}${window.location.search}#${value}`\n      );\n    }, 0);\n  }\n\n  render() {\n    const tBlocks = this.getNavStructure().map((t) => {\n      const cls = `title-anchor title-level${t.level} ${\n        this.state.currentListNo === t.listNo ? 'active' : ''\n      }`;\n\n      return (\n        <div\n          className={cls}\n          onClick={(evt) => {\n            const currentHash = this.props.declarative\n              ? t.text\n              : `heading-${t.index}`;\n\n            // Avoid execution the callback `onHashChange` when clicking current nav item\n            if (t.listNo !== this.state.currentListNo) {\n              // Hash changing callback\n              this.props.onHashChange(currentHash, this.getCurrentHashValue());\n            }\n\n            // Nav item clicking callback\n            this.props.onNavItemClick(evt, evt.target, currentHash);\n\n            this.updateHash(currentHash);\n            this.scrollToTarget(currentHash);\n            this.setState({\n              currentListNo: t.listNo,\n            });\n          }}\n          key={`title_anchor_${Math.random().toString(36).substring(2)}`}>\n          {this.props.ordered ? <small>{t.listNo}</small> : null}\n          {t.text}\n        </div>\n      );\n    });\n\n    return (\n      <div className={`markdown-navigation ${this.props.className}`}>\n        {tBlocks}\n      </div>\n    );\n  }\n}\n\nexport default MarkdownNavbar;\n"],"file":"index.js"}